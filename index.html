<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./dist/main.css" />
    <script src="https://d3js.org/d3.v4.js"></script>
    <script src="./src/scripts/calculator.js"></script>
    <script src="./src/scripts/graph.js"></script>
    <script src="./src/index.js"></script>
    <script src="./dist/main.js"></script>

    <script>
        const form = document.getElementById('input-form')
        
        
        if (form) {
            debugger
            console.log(form);
            console.log(...form);
            addEventListener('submit', makeArr)
        }

        function makeArr(e) {
                e.preventDefault();
                const data = e.currentTarget;
                console.log(...data);
            }
    </script>


<script>

    // set the dimensions and margins of the graph
    var margin = { top: 10, right: 30, bottom: 20, left: 50 },
        width = 460 - margin.left - margin.right,
        height = 400 - margin.top - margin.bottom;

    // append the svg object to the body of the page
    var svg = d3.select("#my_dataviz")
        .append("svg")
        .attr("width", width + margin.left + margin.right)
        .attr("height", height + margin.top + margin.bottom)
        .append("g")
        .attr("transform",
            "translate(" + margin.left + "," + margin.top + ")");

    // Parse the Data
    d3.csv("https://raw.githubusercontent.com/holtzy/D3-graph-gallery/master/DATA/data_stacked.csv", function (data) {

        // List of subgroups = header of the csv files = soil condition here
        var subgroups = data.columns.slice(1)

        // List of groups = species here = value of the first column called group -> I show them on the X axis
        var groups = d3.map(data, function (d) { return (d.group) }).keys()

        // Add X axis
        var x = d3.scaleBand()
            .domain(groups)
            .range([0, width])
            .padding([0.2])
        svg.append("g")
            .attr("transform", "translate(0," + height + ")")
            .call(d3.axisBottom(x).tickSizeOuter(0));

        // Add Y axis
        var y = d3.scaleLinear()
            .domain([0, 60])
            .range([height, 0]);
        svg.append("g")
            .call(d3.axisLeft(y));

        // color palette = one color per subgroup
        var color = d3.scaleOrdinal()
            .domain(subgroups)
            .range(['#e41a1c', '#377eb8', '#4daf4a'])

        //stack the data? --> stack per subgroup
        var stackedData = d3.stack()
            .keys(subgroups)
            (data)

        // Show the bars
        svg.append("g")
            .selectAll("g")
            // Enter in the stack data = loop key per key = group per group
            .data(stackedData)
            .enter().append("g")
            .attr("fill", function (d) { return color(d.key); })
            .selectAll("rect")
            // enter a second time = loop subgroup per subgroup to add all rectangles
            .data(function (d) { return d; })
            .enter().append("rect")
            .attr("x", function (d) { return x(d.data.group); })
            .attr("y", function (d) { return y(d[1]); })
            .attr("height", function (d) { return y(d[0]) - y(d[1]); })
            .attr("width", x.bandwidth())
    })

</script>









    <title>What If</title>
</head>
<body>
    <div class="top-header">
        <div class="about-me">
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque ut tortor odio. Mauris sed enim bibendum, aliquet
            sapien a, tristique mi.  </p>
        </div>
        <div class="heading-info">
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque ut tortor odio. Mauris sed enim bibendum, aliquet
            sapien a, tristique mi. Maecenas euismod velit vel augue suscipit, vel mattis libero ornare. Duis cursus, odio
            vestibulum egestas feugiat, leo augue feugiat sem, et vehicula metus neque quis ligula. Pellentesque arcu eros, pulvinar
            quis bibendum et, blandit quis nunc. Maecenas euismod velit vel augue suscipit, vel mattis libero ornare. Duis cursus, odio
            vestibulum egestas feugiat, leo augue feugiat sem, et vehicula metus neque quis ligula. Pellentesque arcu eros, pulvinar
            quis bibendum et, blandit quis nunc.</p>
        </div>
    </div>
    <div class="body-wrapper">
        <div class="form-wrapper">
            <form id="input-form" action="">
                <label for="habits">Choose a Habit</label>
                <select id="habits" name="habits">
                    <option value="make-coffee">Make Coffee at Home</option>
                    <option value="cut-hair">Cut Your Own Hair</option>
                    <option value="lunch">Make Lunch at Home</option>
                    <option value="cable">Replace Cable with Streaming</option>
                    <option value="haircut">Cut Your Own Hair</option>
                    <option value="save">Save $100/month</option>
                    <option value="bike">Bike to work</option>
                    <option value="generic">Replace Generic with Name Brands</option>
                </select>
                <label for="rate">Interest Rate (between 0 and 20):</label>
                    <input type="number" id="rate" name="rate" min="0" max="20">
                <label for="time">Years (between 1 and 100):</label>
                    <input type="number" id="rate" name="rate" min="1" max="100">
                <button type="submit">Create Graph</button>
            </form>
        </div>
        <div id="graph">
            <h1>graph</h1>
            <svg></svg>
        </div>
        <div class="result-form-wrapper">
            <div class="right-bar">
                <h1>Totals</h1>
                <h2>With Interest:</h2>
                <h2>Without Interest:</h2>
                <button>Add Another Habit</button>
                <button>Reset</button>
            </div>

        </div>
    </div>
</body>
</html>